<?xml version="1.0" encoding="utf-8"?>
<templates id="template" inherit_id="point_of_sale.template">
	<t t-name="PaymentScreenPaymentLines" t-inherit="point_of_sale.PaymentScreenPaymentLines" t-inherit-mode="extension" owl="1">
        <xpath expr="//div[hasclass('selected')]" position="after">

            <tr class="cardLine selected" t-if="line.payment_method.card_id and line.payment_status != 'done'">
                <td ><i class="fa fa-lg fa-credit-card"></i></td>
                <td colspan="2">
                    <select class="instalment" name="instalment" style="width: 14rem">
                    <t t-foreach='line.payment_method.instalments' t-as='instalment_id'>
                        <option t-att-value="instalment_id.id">
                            <t t-esc="instalment_id.name"/>
                            <t t-set="amount" t-value="line.get_amount()"/>
                            <t t-esc="env.pos.format_currency(amount * instalment_id.coefficient)"/>
                        </option>
                    </t>
                    </select>
            	</td>
				<div class="payment-card" t-on-click="trigger('payment-card', { cid: line.cid })">
					Cargar datos
        		</div>
                <td ></td>
            </tr>
        </xpath>

    </t>

	<t t-name="PaymentCardsPopupWidget" owl="1">
	    <div role="dialog" class="modal-dialog">
			<div class="popup">
				<p class="title">Payment Method Card</p>
				<div class="body">
					<form class="checkout_form">
						<div class="message-error hidden"><span>DEBE COMPLETAR TODOS LOS CAMPOS!</span></div>
						<label for="instalment">Seleccionar cantidad de cuotas: </label>
						<div class="instalments">
							<select class="instalment" id="selectPopupInstalments" name="instalment"></select>
							<span >$</span>
		                	<span class="" id="amount"></span>
		                	<span> total</span>
						</div>

	                	<div id="form-card" class="form-field">
							<label for="cc-number">Card number:</label>
							<input id="cc-number" name="card_number" type="text" maxlength="6" placeholder="1111" required="required"></input>
						</div>
						<div id="form-lot" class="form-field">
							<label for="lot-number">Lot number:</label>
							<input id="lot-number" name="lot_number" type="text" maxlength="3" placeholder="123" required="required"></input>
						</div>
						<div id="form-ticket" class="form-field">
							<label for="ticket-number">Ticket number:</label>
							<input id="ticket-number" name="ticket_number" type="text" maxlength="4" placeholder="1234" required="required"></input>
						</div>
					</form>
				</div>
				<div class="footer">
					<button class="button accept" id="btn-accept" t-on-click="getValue">Continuar</button>
					<button class="button cancel" t-on-click="cancel">Cerrar</button>
				</div>
			</div>
	    </div>
	</t>
</templates>

